{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/js/canvas.js","webpack:///./src/js/tetromioes.js","webpack:///./src/js/utils.js"],"names":["canvas","document","querySelector","scoreEl","highestScoreEl","resetEl","statusGame","startBtn","c","getContext","ROW","COLUMN","sq","width","height","boardGame","Array","fill","map","PIECES","I","J","L","O","S","Z","T","score","highestScore","gameOver","addEventListener","control","startGame","Piece","tetromino","color","tetrominoN","activeTetromino","x","y","prototype","draw","row","length","col","unDraw","moveDown","collision","dropStart","Date","lock","piece","randomPiece","moveRight","moveLeft","rotate","nextPattern","kick","newX","newY","checkFullRow","init","event","key","Math","floor","random","isFullRow","splice","incScore","textContent","timeInterval","animationId","animate","requestAnimationFrame","stopGame","now","forEach","el","style","display","fillStyle","fillRect","strokeStyle","strokeRect","console","log","max","cancelAnimationFrame","randomIntFromRange","min","randomColor","colors","distance","x1","y1","x2","y2","xDist","yDist","sqrt","pow","module","exports"],"mappings":"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","file":"./js/canvas.bundle.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = \"./src/js/canvas.js\");\n","import utils from './utils'\r\nimport { I, J, L, O, S, T, Z } from './tetromioes';\r\n\r\nconst canvas = document.querySelector('canvas')\r\nconst scoreEl = document.querySelector('#score');\r\nconst highestScoreEl = document.querySelector('#highest-score');\r\nconst resetEl = document.querySelector('#reset');\r\nconst statusGame = document.querySelector('#status-game');\r\nconst startBtn = document.querySelector('#start-btn');\r\nconst c = canvas.getContext('2d')\r\n\r\n// Variables\r\nconst ROW = 20;\r\nconst COLUMN = 10;\r\nconst sq = 20;\r\n\r\ncanvas.width = sq * COLUMN; \r\ncanvas.height = sq * ROW; \r\n\r\nlet boardGame = [...Array(ROW).fill().map(() => [...Array(COLUMN).fill(0)])]\r\nconst PIECES = [\r\n  [I, 'red'],\r\n  [J, 'blue'],\r\n  [L, 'orange'],\r\n  [O, 'cyan'],\r\n  [S, 'purple'],\r\n  [Z, 'indigo'],\r\n  [T, 'green'],\r\n]\r\nlet score = 0;\r\nlet highestScore = 0;\r\nlet gameOver = false;\r\n\r\n// addEventListener\r\naddEventListener('keydown', control);\r\n\r\nresetEl.addEventListener('click', startGame);\r\n\r\nstartBtn.addEventListener('click', startGame);\r\n\r\n// Objects\r\nfunction Piece(tetromino, color) {\r\n  this.tetromino = tetromino;\r\n  this.tetrominoN = 0;\r\n  this.activeTetromino = this.tetromino[this.tetrominoN];\r\n  this.color = color;\r\n\r\n  this.x = 3;\r\n  this.y = -2;\r\n}\r\n\r\nPiece.prototype.draw = function() {\r\n  for(let row=0;row<this.activeTetromino.length;row++) {\r\n    for(let col=0;col<this.activeTetromino.length;col++) {\r\n      if(this.activeTetromino[row][col]){\r\n        draw( this.x + col,  this.y + row, this.color );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPiece.prototype.unDraw = function() {\r\n  for(let row=0;row<this.activeTetromino.length;row++) {\r\n    for(let col=0;col<this.activeTetromino.length;col++) {\r\n      if(this.activeTetromino[row][col]){\r\n        draw(this.x + col, this.y + row, 'white' );\r\n      }\r\n    }\r\n  }\r\n}\r\n\r\nPiece.prototype.moveDown = function() {\r\n  if(!this.collision(0, 1, this.activeTetromino)) {\r\n    this.unDraw();\r\n    this.y++;\r\n    this.draw();\r\n\r\n    dropStart = new Date();\r\n  } else {\r\n    this.lock();\r\n    piece = randomPiece();\r\n  }\r\n}\r\n\r\nPiece.prototype.moveRight = function() {\r\n  if(!this.collision(1, 0, this.activeTetromino)) {\r\n    this.unDraw();\r\n    this.x++;\r\n    this.draw();\r\n  }    \r\n}\r\n\r\nPiece.prototype.moveLeft = function() {\r\n   if(!this.collision(-1, 0, this.activeTetromino)) {\r\n    this.unDraw();\r\n    this.x--;\r\n    this.draw();\r\n  }  \r\n}\r\n\r\nPiece.prototype.rotate = function() {\r\n  let nextPattern = this.tetromino[( this.tetrominoN + 1 ) % this.tetromino.length];\r\n  let kick = 0;\r\n  if(this.collision(0, 0, nextPattern)) {\r\n    if(this.x <= COLUMN / 2) kick = 1;\r\n    else kick = -1;\r\n  } \r\n  if(!this.collision(kick, 0, nextPattern)){\r\n    this.unDraw();\r\n    this.x += kick;\r\n    this.tetrominoN = (this.tetrominoN + 1) % this.tetromino.length;\r\n    this.activeTetromino = this.tetromino[this.tetrominoN];\r\n    this.draw();\r\n\r\n  }\r\n}\r\n\r\nPiece.prototype.collision = function(x, y, piece) {\r\n  let newX, newY;\r\n  \r\n  for(let row=0;row<piece.length;row++) {\r\n    for(let col=0;col<piece.length;col++)  {\r\n      newX = this.x + x;\r\n      newY = this.y + y;\r\n      if(!piece[row][col]) continue;\r\n      if(newY < 0) continue;\r\n      if(newX + col < 0 || newX + col >= COLUMN || newY + row >= ROW) return true;\r\n      if(boardGame[newY + row][newX + col]) return true;\r\n    }\r\n  }\r\n  return false;\r\n}\r\n\r\nPiece.prototype.lock = function() {\r\n  for(let row=0;row<this.activeTetromino.length;row++) {\r\n      for(let col=0;col<this.activeTetromino.length;col++) {\r\n      if(!this.activeTetromino[row][col]) continue;\r\n      if(this.y + row < 0) {\r\n        // game over\r\n        gameOver = true;\r\n      }\r\n      boardGame[this.y + row][this.x + col] = this.color;\r\n    }\r\n  }\r\n  checkFullRow();\r\n}\r\n\r\n// Implementation\r\nlet dropStart = new Date();\r\nlet piece = randomPiece();\r\nfunction init() { // col = x, row = y\r\n\r\n  for(let row=0; row<ROW; row++) {\r\n    for(let col=0; col<COLUMN; col++) {\r\n      draw(col, row, boardGame[row][col] ? boardGame[row][col] : 'white');\r\n    }\r\n  }\r\n\r\n}\r\n\r\n// control move\r\nfunction control(event) {\r\n  if(gameOver) return;\r\n  if(event.key === 'ArrowDown') {\r\n    piece.moveDown();\r\n  } else if(event.key === 'ArrowUp') {\r\n    piece.rotate();\r\n  } else if(event.key === 'ArrowRight') {\r\n    piece.moveRight();\r\n  } else if(event.key === 'ArrowLeft') {\r\n    piece.moveLeft();\r\n  }\r\n}\r\n\r\n// random piece\r\nfunction randomPiece() {\r\n  let piece = PIECES[Math.floor( Math.random() * PIECES.length )];\r\n  return new Piece(piece[0], piece[1]);\r\n}\r\n\r\n// check full row\r\nfunction checkFullRow() {\r\n  for(let row=0;row<ROW; row++) {\r\n    let isFullRow = true;\r\n    for(let col=0;col<COLUMN;col++) {\r\n      if(!boardGame[row][col]) {\r\n        isFullRow = false;\r\n        break;\r\n      }\r\n    }\r\n    if(!isFullRow) continue;\r\n    \r\n    boardGame.splice(row, 1);\r\n    boardGame = [[...Array(COLUMN).fill(0)], ...boardGame];\r\n    incScore();\r\n    init();\r\n  }\r\n}\r\n\r\nfunction incScore() {\r\n  score += 10;\r\n  scoreEl.textContent = score;\r\n}\r\n\r\n\r\n// Animation Loop\r\nlet timeInterval = 500;\r\nlet animationId;\r\nfunction animate() {\r\n  animationId = requestAnimationFrame(animate)\r\n  if(gameOver) {\r\n    stopGame();\r\n  }\r\n\r\n  let now = new Date();\r\n  if(now - dropStart > timeInterval) {\r\n    piece.moveDown();\r\n    dropStart = new Date();\r\n  } \r\n}\r\n\r\nfunction startGame() {\r\n  gameOver = false;\r\n  dropStart = new Date();\r\n  piece = randomPiece();\r\n  score = 0\r\n\r\n  scoreEl.textContent = 0;\r\n  boardGame.forEach(el => el.fill(0));\r\n\r\n  statusGame.style.display = 'none';\r\n\r\n  init();\r\n  animate();\r\n}\r\n\r\nfunction draw(x, y, color) {\r\n  c.fillStyle = color;\r\n  c.fillRect(x*sq, y*sq, sq, sq);\r\n  c.strokeStyle = 'black';\r\n  c.strokeRect(x*sq, y*sq, sq, sq);\r\n}\r\n\r\nfunction stopGame() {\r\n  console.log('game over');\r\n  highestScore = Math.max(score, highestScore);\r\n  highestScoreEl.textContent = highestScore;\r\n  cancelAnimationFrame(animationId);\r\n\r\n  statusGame.style.display = 'flex';\r\n}\r\n\r\ninit();\r\n","export const I = [\r\n\t[\r\n\t\t[0, 0, 0, 0],\r\n\t\t[1, 1, 1, 1],\r\n\t\t[0, 0, 0, 0],\r\n\t\t[0, 0, 0, 0],\r\n\t],\r\n\t[\r\n\t\t[0, 0, 1, 0],\r\n\t\t[0, 0, 1, 0],\r\n\t\t[0, 0, 1, 0],\r\n\t\t[0, 0, 1, 0],\r\n\t],\r\n\t[\r\n\t\t[0, 0, 0, 0],\r\n\t\t[0, 0, 0, 0],\r\n\t\t[1, 1, 1, 1],\r\n\t\t[0, 0, 0, 0],\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0, 0],\r\n\t\t[0, 1, 0, 0],\r\n\t\t[0, 1, 0, 0],\r\n\t\t[0, 1, 0, 0],\r\n\t]\r\n];\r\n\r\nexport const J = [\r\n\t[\r\n\t\t[1, 0, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 0, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 1],\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 0, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 0, 1]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[1, 1, 0]\r\n\t]\r\n];\r\n\r\nexport const L = [\r\n\t[\r\n\t\t[0, 0, 1],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 0, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 1]\r\n\t],\r\n\t[\r\n\t\t[0, 0, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[1, 0, 0]\r\n\t],\r\n\t[\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 0]\r\n\t]\r\n];\r\n\r\nexport const O = [\r\n\t[\r\n\t\t[0, 0, 0, 0],\r\n\t\t[0, 1, 1, 0],\r\n\t\t[0, 1, 1, 0],\r\n\t\t[0, 0, 0, 0],\r\n\t]\r\n];\r\n\r\nexport const S = [\r\n\t[\r\n\t\t[0, 1, 1],\r\n\t\t[1, 1, 0],\r\n\t\t[0, 0, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 1],\r\n\t\t[0, 0, 1]\r\n\t],\r\n\t[\r\n\t\t[0, 0, 0],\r\n\t\t[0, 1, 1],\r\n\t\t[1, 1, 0]\r\n\t],\r\n\t[\r\n\t\t[1, 0, 0],\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 0]\r\n\t]\r\n];\r\n\r\nexport const T = [\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 0, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[0, 1, 1],\r\n\t\t[0, 1, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 0, 0],\r\n\t\t[1, 1, 1],\r\n\t\t[0, 1, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 0]\r\n\t]\r\n];\r\n\r\nexport const Z = [\r\n\t[\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 1],\r\n\t\t[0, 0, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 0, 1],\r\n\t\t[0, 1, 1],\r\n\t\t[0, 1, 0]\r\n\t],\r\n\t[\r\n\t\t[0, 0, 0],\r\n\t\t[1, 1, 0],\r\n\t\t[0, 1, 1]\r\n\t],\r\n\t[\r\n\t\t[0, 1, 0],\r\n\t\t[1, 1, 0],\r\n\t\t[1, 0, 0]\r\n\t]\r\n];\r\n\r\n","function randomIntFromRange(min, max) {\r\n  return Math.floor(Math.random() * (max - min + 1) + min)\r\n}\r\n\r\nfunction randomColor(colors) {\r\n  return colors[Math.floor(Math.random() * colors.length)]\r\n}\r\n\r\nfunction distance(x1, y1, x2, y2) {\r\n  const xDist = x2 - x1\r\n  const yDist = y2 - y1\r\n\r\n  return Math.sqrt(Math.pow(xDist, 2) + Math.pow(yDist, 2))\r\n}\r\n\r\nmodule.exports = { randomIntFromRange, randomColor, distance }\r\n"],"sourceRoot":""}